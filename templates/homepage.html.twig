<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link 
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
            rel="stylesheet" 
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
            crossorigin="anonymous"
        >
        <link 
            rel="stylesheet" 
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" 
            integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" 
            crossorigin="anonymous" 
            referrerpolicy="no-referrer" 
        />
        <script 
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" 
            crossorigin="anonymous"
        ></script>
        <script 
            src="https://code.jquery.com/jquery-3.6.0.min.js" 
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" 
            crossorigin="anonymous">
        </script>
        <script src="{{ asset('js/addClient.js') }}"></script>
    </head>
    <body>
        {% block body %}
            <div class="row">
                <div class="offset-lg-1 col-lg-12"><h1>MON SUPER TEST</h1></div>
                <div class="offset-lg-1 col-lg-10">
                    <table class="table table-bordered table-striped">
                        <thead>
                            <th><i class="fa-solid fa-sort-up"></i> Raison sociale</th>
                            <th><i class="fa-solid fa-sort-up"></i> Nom du contact</th>
                            <th><i class="fa-solid fa-sort-up"></i> Prénom du contact</th>
                            <th><i class="fa-solid fa-sort-up"></i> Email</th>
                            <th><i class="fa-solid fa-sort-up"></i> Téléphone</th>
                            <th><i class="fa-solid fa-sort-up"></i> Total commandes payées</th>
                        </thead>
                        <tbody>
                            {% for client in clients %}
                                <tr>
                                    <td "align-middle">{{client.denomination}}</td>
                                    <td "align-middle">{{client.contact.firstName}}</td>
                                    <td "align-middle">{{client.contact.lastName}}</td>
                                    <td "align-middle">{{client.contact.mail}}</td>
                                    <td "align-middle">{{client.contact.phone}}</td>
                                    <td "align-middle">{{client.orders | length}}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <div class="offset-lg-1 col-lg-10 mb-5">
                    <button id="addClientBtn" class="btn btn-primary">Ajouter un client</button>
                </div>
                {% for flashMessage in app.session.flashbag.get('notice') %}
                    <div class="alert alert-success offset-lg-2 col-lg-8 mb-3" role="alert">{{ flashMessage }}</div>
                {% endfor %}
                <div class="row" id="addClientForm">
                    {{ form_start(form) }}
                        <div class="offset-lg-2 col-lg-8 mb-3">
                            {{ form_label(form.denomination, null, { 'label_attr': {'class': 'form-label'} }) }}
                            {{ form_widget(form.denomination, {'attr': {'class': 'form-control'}}) }}
                            
                            {% if form_errors(form.denomination) %}
                                {{ form_errors(form.denomination) }}
                            {% endif %}
                        </div>
                        <div class="row">
                            <div class="offset-lg-2 col-lg-3 mb-3">
                                {{ form_label(form.contactFirstName, null, { 'label_attr': {'class': 'form-label'} }) }}
                                {{ form_widget(form.contactFirstName, {'attr': {'class': 'form-control'}}) }}
                                
                                {% if form_errors(form.contactFirstName) %}
                                    {{ form_errors(form.contactFirstName) }}
                                {% endif %}
                            </div>

                            <div class="col-lg-3 mb-3">
                                {{ form_label(form.contactLastName, null, { 'label_attr': {'class': 'form-label'} }) }}
                                {{ form_widget(form.contactLastName, {'attr': {'class': 'form-control'}}) }}
                                
                                {% if form_errors(form.contactLastName) %}
                                    {{ form_errors(form.contactLastName) }}
                                {% endif %}
                            </div>

                            <div class="col-lg-2 mb-3">
                                {{ form_label(form.contactCountry, null, { 'label_attr': {'class': 'form-label'} }) }}
                                {{ form_widget(form.contactCountry, {'attr': {'class': 'form-control'}}) }}
                                
                                {% if form_errors(form.contactCountry) %}
                                    {{ form_errors(form.contactCountry) }}
                                {% endif %}
                            </div>
                        </div>

                        <div class="offset-lg-2 col-lg-8 mb-3">
                            {{ form_label(form.contactEmail, null, { 'label_attr': {'class': 'form-label'} }) }}
                            {{ form_widget(form.contactEmail, {'attr': {'class': 'form-control'}}) }}
                            
                            {% if form_errors(form.contactEmail) %}
                                {{ form_errors(form.contactEmail) }}
                            {% endif %}
                        </div>

                        <div class="offset-lg-2 col-lg-8 mb-3">
                            {{ form_label(form.contactPhone, null, { 'label_attr': {'class': 'form-label'} }) }}
                            {{ form_widget(form.contactPhone, {'attr': {'class': 'form-control'}}) }}
                            
                            {% if form_errors(form.contactPhone) %}
                                {{ form_errors(form.contactPhone) }}
                            {% endif %}
                        </div>
                        <div class="offset-lg-2 col-lg-8 mt-3" style="text-align: center">
                            <button type="submit"  class="btn btn-success mb-5">Valider</button>
                            <button id="cancelBtn" class="btn btn-danger mb-5">Annuler</button>
                        </div>              
                        
                    {{ form_end(form) }}
                </div>

            </div>
        {% endblock %}
    </body>
</html>
